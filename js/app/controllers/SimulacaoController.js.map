{"version":3,"sources":["../../app-es6/controllers/SimulacaoController.js"],"names":["SimulacaoController","$","document","querySelector","bind","_inputAnoRecebimento","_inputValorRecebido","_inputNumeroDeMeses","_inputPssRetido","_inputBaseDeCalculo","_inputIrDevido","_inputIrCobrado","_inputNovaBaseDeCalculo","_inputIrARestituir","_inputIrARestituirAtualizado","event","preventDefault","value","NumeroHelper","formataMoeda","_executarSimulacaoAnoInformado","valido","placeholder","style","borderColor","_simulacao","_criarSimulacao","baseDeCalculo","toLocaleString","currency","novaBaseDeCalculo","irDevido","irCobrado","irARestituir","irARestituirAtualizado","i","_simulacaoLoop","innerHTML","anoInformado","valorRecebido","replace","pssRetido","Simulacao","parseFloat","parseInt"],"mappings":"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","file":"SimulacaoController.js","sourcesContent":["/**\r\n * Classe do controlador da simulação. Responsável por \"amarrar\" todas as interações da tela.\r\n */\r\nclass SimulacaoController {\r\n\r\n        /**\r\n         * Método construtor\r\n         */\r\n        constructor() {\r\n                /**\r\n                 * Cria um apelido para seletor do DOM. Como o $ do jQuery.\r\n                 */\r\n                let $ = document.querySelector.bind(document);\r\n\r\n                /**\r\n                 * Captura os inputs da tela para futuros controles.\r\n                 */\r\n                this._inputAnoRecebimento = $('#anoRecebimento');\r\n                this._inputValorRecebido = $('#valorRecebido');\r\n                this._inputNumeroDeMeses = $('#numeroDeMeses');\r\n\r\n                this._inputPssRetido = $('#pssRetido');\r\n                this._inputBaseDeCalculo = $('#baseDeCalculo');\r\n\r\n                this._inputIrDevido = $('#irDevido');\r\n                this._inputIrCobrado = $('#irCobrado');\r\n\r\n                this._inputNovaBaseDeCalculo = $('#novaBaseDeCalculo');\r\n\r\n                this._inputIrARestituir = $('#irARestituir');\r\n                this._inputIrARestituirAtualizado = $('#irARestituirAtualizado');\r\n        }\r\n\r\n        /**\r\n         * Método que formata o valor do campo '#valorRecebido', mediante um evento da página.\r\n         * @param Event event => evento que acionou a formatação do valor do campo '#valorRecebido'.\r\n         */\r\n        formataValorRecebido(event) {\r\n\r\n            event.preventDefault();\r\n\r\n            this._inputValorRecebido.value = NumeroHelper.formataMoeda(this._inputValorRecebido.value);\r\n        }\r\n\r\n        /**\r\n         * Método que formata o valor do campo '#pssRetido', mediante um evento da página.\r\n         * @param Event event => evento que acionou a formatação do valor do campo '#pssRetido'.\r\n         */\r\n        formataPssRetido(event) {\r\n\r\n            event.preventDefault();\r\n\r\n            this._inputPssRetido.value = NumeroHelper.formataMoeda(this._inputPssRetido.value);\r\n        }\r\n\r\n        /**\r\n         * Método que executa as simulações da página.\r\n         * @param Event event => evento que acionou a execução das simulações.\r\n         */\r\n        executarSimulacoes(event) {            \r\n\r\n            /**\r\n             * Evita a execução padrão do evento para que se tenha total controle da execução.\r\n             */\r\n            event.preventDefault();\r\n\r\n            //if(!this._validarDadosDeEntrada()) return false;\r\n\r\n            /**\r\n             * Chama os métodos de exeução das simulações do ano informado e dos outros.\r\n             */\r\n            this._executarSimulacaoAnoInformado();\r\n            //this._executarSimulacaoDe2005A2011();\r\n\r\n        }\r\n\r\n        /**\r\n         * Método que valida os dados de entrada.        \r\n         */\r\n        _validarDadosDeEntrada() {\r\n\r\n            event.preventDefault();\r\n\r\n            let valido = true;\r\n\r\n            if(!this._inputAnoRecebimento.value) {\r\n\r\n                this._inputAnoRecebimento.placeholder = 'Informe o ano.';\r\n                this._inputAnoRecebimento.style.borderColor = 'red';\r\n\r\n                valido = false;\r\n            }\r\n            else {\r\n\r\n                this._inputAnoRecebimento.placeholder = '';\r\n                this._inputAnoRecebimento.style.borderColor = '';\r\n            }\r\n\r\n            if(!this._inputValorRecebido.value) {\r\n\r\n                this._inputValorRecebido.placeholder = 'Informe o valor.';\r\n                this._inputValorRecebido.style.borderColor = 'red';\r\n\r\n                valido = false;\r\n            }\r\n            else {\r\n\r\n                this._inputValorRecebido.placeholder = '';\r\n                this._inputValorRecebido.style.borderColor = '';                \r\n            }\r\n\r\n            if(!this._inputNumeroDeMeses.value) {\r\n\r\n                this._inputNumeroDeMeses.placeholder = 'Informe meses.';\r\n                this._inputNumeroDeMeses.style.borderColor = 'red';\r\n\r\n                valido = false;\r\n            }\r\n            else {\r\n\r\n                this._inputNumeroDeMeses.placeholder = '';\r\n                this._inputNumeroDeMeses.style.borderColor = '';                \r\n            }\r\n\r\n            return valido;            \r\n        }\r\n\r\n        /**\r\n         * Método que executa a simulação do ano informado na tela.\r\n         */\r\n        _executarSimulacaoAnoInformado() {\r\n\r\n            /**\r\n             * Cria uma simulação a partir do ano informado no input '#anoRecebimento', já obtendo todos os dados a serem exibidos nos campos vazios da tela.\r\n             */\r\n            this._simulacao = this._criarSimulacao(this._inputAnoRecebimento.value);\r\n\r\n            /**\r\n             * Imprime os dados nos respectivos inputs, formatando como valor moeda BRL (R$).\r\n             */\r\n            //this._inputPssRetido.value = this._simulacao.pssRetido.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n            this._inputBaseDeCalculo.value = this._simulacao.baseDeCalculo.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n            this._inputNovaBaseDeCalculo.value = this._simulacao.novaBaseDeCalculo.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n\r\n            this._inputIrDevido.value = this._simulacao.irDevido.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n            this._inputIrCobrado.value = this._simulacao.irCobrado.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n\r\n            this._inputNovaBaseDeCalculo.value = this._simulacao.novaBaseDeCalculo.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n            this._inputIrARestituir.value = this._simulacao.irARestituir.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n            this._inputIrARestituirAtualizado.value = this._simulacao.irARestituirAtualizado.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n\r\n        }\r\n\r\n        /**\r\n         * Método que executa as simulações restantes, de 2005 a 2009, pulando a do ano informado, pois esta já foi executada pelo método _executarSimulacaoAnoInformado.\r\n         */\r\n        _executarSimulacaoDe2005A2011() {\r\n\r\n            /**\r\n             * Cria um apelido para seletor do DOM. Como o $ do jQuery.\r\n             */\r\n            let $ = document.querySelector.bind(document);\r\n\r\n            /**\r\n             * Inicializa o loop para os anos restantes.\r\n             */\r\n            for(let i = 2005; i <= 2011; i++) {\r\n\r\n                /**\r\n                 * Inicializa a simulação do loop vazia.\r\n                 */\r\n                this._simulacaoLoop = null;\r\n\r\n                /**\r\n                 * Verifica se a iteração do laço se refere à simulação já criada.\r\n                 */\r\n                if(i == this._inputAnoRecebimento.value) {\r\n\r\n                    /**\r\n                     * Imprime os valores na tabela a partir da simulação já criada.\r\n                     */\r\n                    $('#RRADevido' + i).innerHTML = this._simulacao.irDevido.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n                    $('#RRACobrado' + i).innerHTML = this._simulacao.irCobrado.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n\r\n                    continue;\r\n                }\r\n                else {\r\n\r\n                    /**\r\n                     * Cria a simulação a partir da iteração do laço, correspondente a um dos anos (2005 a 2009).\r\n                     */\r\n                    this._simulacaoLoop = this._criarSimulacao(i);\r\n\r\n                    $('#RRADevido' + i).innerHTML = this._simulacaoLoop.irDevido.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n                    $('#RRACobrado' + i).innerHTML = this._simulacaoLoop.irCobrado.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Cria simulação a partir de um ano informado.\r\n         * @param int anoInformado => ano informado. Necessário para parametrização da simulação no modelo.\r\n         */\r\n        _criarSimulacao(anoInformado) {\r\n\r\n            let valorRecebido = this._inputValorRecebido.value.replace('.', '').replace(',', '.');\r\n\r\n            let pssRetido = this._inputPssRetido.value.replace('.', '').replace(',', '.');\r\n\r\n            return new Simulacao(anoInformado, parseFloat(valorRecebido), parseFloat(pssRetido), parseInt(this._inputNumeroDeMeses.value));\r\n        }\r\n\r\n}\r\n"]}